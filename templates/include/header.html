{% load static %}

<header class="main-header clearfix">
    <nav class="main-menu clearfix">
        <div class="main-menu-wrapper clearfix">
            <div class="container clearfix">
                <div class="main-menu-wrapper-inner clearfix">
                    <div class="main-menu-wrapper__left clearfix">
                        <div class="main-menu-wrapper__logo">
                            <a href="{% url 'index' %}">
                                <img src="{% static 'assets/images/logo.png' %}" alt="" style="width: 80px;">
                            </a>
                        </div>
                        <div class="main-menu-wrapper__main-menu">
                            <a href="#" class="mobile-nav__toggler"><i class="fa fa-bars"></i></a>
                            <ul class="main-menu__list">
                                <li class="dropdown current">
                                    <a href="{% url 'index' %}">Главная строница</a>
                                </li>
                                <li class="dropdown">
                                    <a href="#">Направления</a>
                                    <ul>
                                        <li><a href="{% url 'destinations' %}">Направления</a></li>
                                        <li><a href="destinations-details.html">Детали направлений</a></li>
                                    </ul>
                                </li>
                                <li class="dropdown">
                                    <a href="#">Туры</a>
                                    <ul>
                                        <li><a href="tours.html">Туры</a></li>
                                        <li><a href="tours-list.html">Список туров</a></li>
                                        <li><a href="tour-details.html">Подробности тура</a></li>
                                    </ul>
                                </li>
                                <li class="dropdown">
                                    <a href="{% url 'about' %}">О нас</a>
                                </li>
                                <li class="dropdown">
                                    <a href="#">Новости</a>
                                    <ul>
                                        <li><a href="{% url 'news:news' %}">Новости</a></li>
                                        <li><a href="news-details.html">Детали новостей</a></li>
                                    </ul>
                                </li>
                                <li><a href="{% url 'contact' %}">Контакты</a></li>
                                <li aria-checked="true" role="menuitem">
                                    <a class="language-switch" data-language="en">English</a>
                                    <a class="language-switch" data-language="ru">Русский</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="main-menu-wrapper__right">
                        <a href="#" class="main-menu__search search-toggler icon-magnifying-glass"></a>
                    </div>
                </div>
            </div>
        </div>
    </nav>
</header>

<div class="preloader">
    <img class="preloader__image" width="60" src="{% static 'assets/images/logo.png' %}" alt=""
        style="width: 200px; height: 190px;" />
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const languageSwitches = document.querySelectorAll('.language-switch');

        const currentLanguage = window.location.pathname.split('/')[1];

        languageSwitches.forEach(function (languageSwitch) {
            const selectedLanguage = languageSwitch.getAttribute('data-language');

            if (selectedLanguage === currentLanguage) {
                languageSwitch.classList.add('active-language');
            }

            languageSwitch.addEventListener('click', function () {
                const pathSegments = window.location.pathname.split('/');
                if (['ru', 'en'].includes(pathSegments[1])) {
                    pathSegments[1] = selectedLanguage;
                } else {
                    pathSegments.splice(1, 0, selectedLanguage);
                }

                const newPath = pathSegments.join('/');
                const newUrl = window.location.origin + newPath + window.location.search;

                window.location.href = newUrl;
            });
        });
    });
</script>
